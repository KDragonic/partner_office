{% load static %}
{% load form static %}

<div class="row p-2">
  <div class="col-12 col-xl-6 px-2 m-0">
    <div class="kdjq-card h-100" kdjq>
      <div class="kdjq-card--body d-flex flex-column" style="height: 100%; justify-content: space-between;">
        <div class="d-flex">
          <div class="avatar" style="padding: 3px; border-radius: 5px; background-color: #EDEDED;">
            <img src="{{ user.avatar }}" style="width: 80px; height: 80px; border-radius: 5px; object-fit: cover;" class="img-fluid rounded-top" alt="" />
          </div>
          <div class="fio_text d-flex" style="margin-left: 18px; flex-direction: column; justify-content: center; align-items: flex-start; gap: 7px">
            <span style="color: #000; font-size: 19px; font-weight: 700; line-height: 100%;">{{ user.fio }}</span>
            <span style="color: #868695; font-size: 16px; font-weight: 700; line-height: 100%;">{{ user.str_date_birth }}</span>
          </div>
        </div>
        <div class="d-flex params">
          <style>
            input[readonly] {
              border: none;
              outline: none;
              padding: 0;
              border-radius: 0;
            }

            input[readonly]:focus {
              outline: none;
              box-shadow: none;
            }
          </style>

          <form class="d-flex gap-2">
            <div class="col">
              <div>
                <label for="input_user_email" class="form-label" style="color: #868695; font-size: 16px;">Почта</label>
                <input type="text" name="user_email" id="input_user_email" value="{{ user.email }}" readonly class="form-control" />
              </div>
            </div>
            <div class="col">
              <div>
                <label for="input_user_phone" class="form-label" style="color: #868695; font-size: 16px;">Телефон</label>
                <input type="text" name="user_phone" id="input_user_phone" value="{{ user.phone }}" readonly class="form-control" />
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="col-12 col-xl-6 px-2">
    <div class="row">
      <div class="col-12 col-md-6 px-2 pb-3">
        <div class="kdjq-card d-flex" kdjq style="min-height: 100px;">
          <div class="kdjq-card--body d-flex flex-grow-1" style="justify-content: space-between; gap: 10px">
            <span class="procent" style="color: #FF7600; font-size: 45px; font-weight: 600; line-height: 100%; text-wrap: nowrap; display: flex; align-items: center;">40 %</span>
            <span class="text" style="color: #000; font-size: 18px; font-weight: 500; text-align: right; display: flex; align-items: center;">С каждой оплаты бронирования</span>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6 px-2 pb-3">
        <div class="kdjq-card d-flex" kdjq style="min-height: 100px;">
          <div class="kdjq-card--body d-flex flex-grow-1" style="justify-content: space-between; gap: 10px">
            <span class="procent" style="color: #17A1A1; font-size: 45px; font-weight: 600; line-height: 100%; text-wrap: nowrap; display: flex; align-items: center;">10 %</span>
            <span class="text" style="color: #000; font-size: 18px; font-weight: 500; text-align: right; display: flex; align-items: center;">От заработка рефералов</span>
          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-md-6 px-2">
        <div class="kdjq-card d-flex" kdjq style="min-height: 100px;">
          <div class="kdjq-card--body d-flex flex-grow-1 flex-column" style="justify-content: center;">
            <span class="title" style="font-size: 18px; font-weight: 500;">Есть вопрос?</span>
            <span class="text" style="font-size: 15px; color: #868695; line-height: 19px    ;">Прочитайте <a href="">документацию</a>, не нашли ответ на свой вопрос? Задайте его в <a href="">техподдержки</a></span>
          </div>
        </div>
      </div>
      <div class="col-12 col-md-6 px-2">
        <div class="kdjq-card d-flex" kdjq style="min-height: 100px;">
          <div class="kdjq-card--body d-flex flex-grow-1 flex-column" style="justify-content: center;">
            <span class="title" style="font-size: 18px; font-weight: 500; text-align: center; margin-bottom: 13px;">Мой уникальный ID</span>
            <div class="d-flex" style="align-items: center; justify-content: space-between; gap: 10px;">
              <button type="button" class="btn btn-primary" style="display: flex; align-items: center; gap: 10px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="27" viewBox="0 0 25 27" fill="none">
                  <path fill-rule="evenodd" clip-rule="evenodd" d="M15.9375 0H10.8675C8.57 0 6.75 0 5.32625 0.19125C3.86125 0.38875 2.675 0.80375 1.73875 1.73875C0.80375 2.675 0.38875 3.86125 0.19125 5.32625C1.49012e-07 6.75125 0 8.57 0 10.8675V18.4375C3.01741e-05 19.5543 0.39867 20.6344 1.12417 21.4834C1.84967 22.3324 2.85439 22.8946 3.9575 23.0688C4.12875 24.0238 4.46 24.8388 5.1225 25.5025C5.875 26.255 6.8225 26.5775 7.9475 26.73C9.03125 26.875 10.41 26.875 12.1187 26.875H16.0063C17.715 26.875 19.0938 26.875 20.1775 26.73C21.3025 26.5775 22.25 26.255 23.0025 25.5025C23.755 24.75 24.0775 23.8025 24.23 22.6775C24.375 21.5938 24.375 20.215 24.375 18.5063V12.1187C24.375 10.41 24.375 9.03125 24.23 7.9475C24.0775 6.8225 23.755 5.875 23.0025 5.1225C22.3388 4.46 21.5238 4.12875 20.5688 3.9575C20.3946 2.85439 19.8324 1.84967 18.9834 1.12417C18.1344 0.39867 17.0543 3.01741e-05 15.9375 0ZM18.6 3.77625C18.4099 3.22125 18.0511 2.73957 17.5736 2.39866C17.0962 2.05774 16.5241 1.87464 15.9375 1.875H10.9375C8.55375 1.875 6.86125 1.8775 5.575 2.05C4.31875 2.21875 3.59375 2.53625 3.065 3.065C2.53625 3.59375 2.21875 4.31875 2.05 5.57625C1.8775 6.86125 1.875 8.55375 1.875 10.9375V18.4375C1.87464 19.0241 2.05774 19.5962 2.39866 20.0736C2.73957 20.5511 3.22125 20.9099 3.77625 21.1C3.75 20.3375 3.75 19.475 3.75 18.5063V12.1187C3.75 10.41 3.75 9.03125 3.89625 7.9475C4.04625 6.8225 4.37125 5.875 5.1225 5.1225C5.875 4.37 6.8225 4.0475 7.9475 3.89625C9.03125 3.75 10.41 3.75 12.1187 3.75H16.0063C16.975 3.75 17.8375 3.75 18.6 3.77625ZM6.4475 6.45C6.79375 6.10375 7.27875 5.87875 8.1975 5.755C9.14 5.62875 10.3925 5.62625 12.1862 5.62625H15.9362C17.73 5.62625 18.9813 5.62875 19.9263 5.755C20.8438 5.87875 21.3287 6.105 21.675 6.45C22.0212 6.79625 22.2462 7.28125 22.37 8.2C22.4962 9.1425 22.4988 10.395 22.4988 12.1888V18.4387C22.4988 20.2325 22.4962 21.4838 22.37 22.4288C22.2462 23.3463 22.02 23.8312 21.675 24.1775C21.3287 24.5237 20.8438 24.7488 19.925 24.8725C18.9813 24.9988 17.73 25.0012 15.9362 25.0012H12.1862C10.3925 25.0012 9.14 24.9988 8.19625 24.8725C7.27875 24.7488 6.79375 24.5225 6.4475 24.1775C6.10125 23.8312 5.87625 23.3463 5.7525 22.4275C5.62625 21.4837 5.62375 20.2325 5.62375 18.4387V12.1888C5.62375 10.395 5.62625 9.1425 5.7525 8.19875C5.87625 7.28125 6.1025 6.79625 6.4475 6.45Z" fill="white" />
                </svg>
                <span>Скопировать</span>
              </button>
              <span class="user_id" style="width: 100%; color: #C1DEFF; text-align: center; font-family: Manrope; font-size: 32px; font-style: normal; font-weight: 800; line-height: 100%; letter-spacing: 6.4px;">{{ user.id }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row p-2">
  <div class="col-12 col-xl-6 px-2 m-0">
    <div class="kdjq-card" kdjq>
      <div class="kdjq-card--header">
        <span class="kdjq-card--header--title">Смена пароля</span>
      </div>
      <div class="kdjq-card--body pt-0">
        <div class="row p-1">
          <div class="col-12 col-md-4 p-2">
            <label for="" class="form-label">Текущий пароль</label>
            <input type="text" class="form-control" name="" id="" placeholder="" />
          </div>
          <div class="col-12 col-md-4 p-2">
            <label for="" class="form-label">Новый пароль</label>
            <input type="text" class="form-control" name="" id="" placeholder="" />
          </div>
          <div class="col-12 col-md-4 p-2">
            <label for="" class="form-label">Повторить пароль</label>
            <input type="text" class="form-control" name="" id="" placeholder="" />
          </div>
        </div>
        <button type="button" class="btn btn-primary">Изменить</button>
      </div>
      <div class="kdjq-card--footer"></div>
    </div>
  </div>

  <div class="col-12 col-xl-6 px-2 m-0">
    <div class="kdjq-card payment_details" kdjq>
      <div class="kdjq-card--header">
        <span class="kdjq-card--header--title">Реквизиты для выплат</span>
      </div>
      <div class="kdjq-card--body pt-0">
        <div class="row p-1" style="align-items: flex-end;">
          <div class="col-12 col-md-3 p-2">
            <label for="" class="form-label">Способ вывода</label>
            <select class="form-select" name="withdrawal_method" id="input_withdrawal_method">
              <option selected value="card_rf">Карта РФ</option>
              <option value="individual_entrepreneur">Инд. пред.</option>
              <option value="legal_entity">Юр. лицо</option>
              <option value="self_employed">Самозанятый</option>
            </select>
          </div>

          <div class="col-12 col-md-4 p-2" show-when-status="card_rf">
            <label for="input_card_number" class="form-label">Номер карты</label>
            <input type="text" class="form-control" name="card_number" id="input_card_number" placeholder="**** **** **** ****" />
          </div>
          <div class="col-12 col-md-4 p-2" show-when-status="card_rf">
            <label for="input_card_holder_name" class="form-label">Имя держателя карты</label>
            <input type="text" class="form-control" name="card_holder_name" id="input_card_holder_name" placeholder="ИВАНОВ ИВАН" />
          </div>


          <div class="col-12 col-md-3 p-2" show-when-status="individual_entrepreneur">
            <label for="input_ogrn" class="form-label">ОГРН</label>
            <input type="text" class="form-control" name="ogrn" id="input_ogrn" placeholder="1234 5678 9012 345" />
          </div>
          <div class="col-12 col-md-3 p-2" show-when-status="individual_entrepreneur">
            <label for="input_inn" class="form-label">ИНН</label>
            <input type="text" class="form-control" name="inn" id="input_inn" placeholder="1234 5678 9012" />
          </div>
          <div class="col-12 col-md-3 p-2" show-when-status="individual_entrepreneur">
            <label for="input_bank_account" class="form-label">Р/С</label>
            <input type="text" class="form-control" name="bank_account" id="input_bank_account" placeholder="1234 5678 9012 3456 7890" />
          </div>


          <div class="col-12 col-md-3 p-2" show-when-status="legal_entity">
            <label for="input_organization_name" class="form-label">Название организации</label>
            <input type="text" class="form-control" name="organization_name" id="input_organization_name" placeholder="ООО Компания" />
          </div>
          <div class="col-12 col-md-3 p-2" show-when-status="legal_entity">
            <label for="input_inn" class="form-label">ИНН</label>
            <input type="text" class="form-control" name="inn" id="input_inn" placeholder="1234 5678 9012" />
          </div>
          <div class="col-12 col-md-3 p-2" show-when-status="legal_entity">
            <label for="input_bank_account" class="form-label">Р/С</label>
            <input type="text" class="form-control" name="bank_account" id="input_bank_account" placeholder="1234 5678 9012 3456 7890" />
          </div>



          <div class="col-12 col-md-4 p-2" show-when-status="self_employed">
            <label for="input_inn" class="form-label">ИНН</label>
            <input type="text" class="form-control" name="inn" id="input_inn" placeholder="1234 5678 9012" />
          </div>
          <div class="col-12 col-md-4 p-2" show-when-status="self_employed">
            <label for="input_bank_account" class="form-label">Р/С</label>
            <input type="text" class="form-control" name="bank_account" id="input_bank_account" placeholder="1234 5678 9012 3456 7890" />
          </div>
        </div>

        <script>
          $(document).ready(function () {
            function handleWithdrawalMethodChange() {
              let value = $('#input_withdrawal_method').val()
              $('.payment_details').find('[show-when-status]').hide()
              $('.payment_details').find(`[show-when-status="${value}"]`).show()
            }

            $('#input_withdrawal_method').change(handleWithdrawalMethodChange)
            handleWithdrawalMethodChange()
          })
        </script>

        <button type="button" class="btn btn-primary">Сохранить</button>
      </div>
      <div class="kdjq-card--footer"></div>
    </div>
  </div>
</div>
